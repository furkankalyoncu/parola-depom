<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style/index.css">
    <meta name="description" content="Tarayıcı tabanlı parola depolama.">
    <title>Parola Depom</title>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7ME6PNFBV7"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-7ME6PNFBV7');
    </script>
</head>

<body>
    <div class="justify-items-start md:justify-items-center mt-8 text-center text-5xl">
        <h1 class="place-self-center" translate="no" style="font-family: 'Open Sans', sans-serif;">Parola Depom</h2>
    </div>
    <div class="flex justify-end mr-56">
        <button id="newButton"
            class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded mt-10 text-lg transition duration-300 ease-in-out transform hover:-translate-y-1 hover:scale-110">
            Yeni
        </button>
        <button id="preferences" onclick="openModal('main-modal')"
            class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded mt-10 text-lg ml-2">
            Tercihler
        </button>
    </div>

    <div class="py-8 mt-8 px-8 max-w-sm mx-auto bg-white rounded-xl shadow-md space-y-2 sm:py-4 hidden" id="newForm">
        <form method="POST" id="form" autocomplete="off">
            <div class="text-center space-y-2 sm:text-left">
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <p class="text-lg text-black font-semibold">
                        Platform
                    </p>
                    <input
                        class="py-2 px-4 rounded-lg border-2 border-purple-300 mt-1 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        type="text" name="platform" />
                </div>
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <p class="text-lg text-black font-semibold">
                        URL
                    </p>
                    <input
                        class="py-2 px-4 rounded-lg border-2 border-purple-300 mt-1 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        type="text" name="url" placeholder="opsiyonel" />
                </div>
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <p class="text-lg text-black font-semibold">
                        Kullanıcı Adı
                    </p>
                    <input
                        class="py-2 px-4 rounded-lg border-2 border-purple-300 mt-1 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        type="text" name="username" />
                </div>
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <p class="text-lg text-black font-semibold">
                        Parola
                    </p>
                    <input
                        class="py-2 px-4 rounded-lg border-2 border-purple-300 mt-1 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        type="text" name="password" />
                </div>
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <button
                        class="px-4 py-2 text-base text-purple-600 font-semibold rounded-full border border-purple-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"
                        id="new" type="submit">Ekle</button>
                </div>
            </div>
        </form>
    </div>

    <div class="py-8 mt-8 px-8 max-w-sm mx-auto bg-white rounded-xl shadow-md space-y-2 sm:py-4 hidden" id="editForm">
        <div class="grid grid-cols-1 text-center text-2xl justify-items-end cursor-pointer" id="closeEdit">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
        </div>

        <div class="grid grid-cols-1 mt-5 mx-7 text-center text-2xl font-bold">
            <h2 id="title">Düzenle</h2>
        </div>
        <div class="grid grid-cols-1 mt-5 mx-7 text-center text-xl">
            <h2 id="editTitle">Düzenle</h2>
        </div>
        <form method="POST" id="editFormForm" autocomplete="off">
            <div class="text-center space-y-2 sm:text-left">
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <p class="text-lg text-black font-semibold">
                        Platform
                    </p>
                    <input
                        class="py-2 px-4 rounded-lg border-2 border-purple-300 mt-1 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        type="text" name="editPlatform" id="editPlatform" />
                </div>
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <p class="text-lg text-black font-semibold">
                        URL
                    </p>
                    <input
                        class="py-2 px-4 rounded-lg border-2 border-purple-300 mt-1 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        type="text" name="editURL" id="editURL" placeholder="opsiyonel" />
                </div>
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <p class="text-lg text-black font-semibold">
                        Kullanıcı Adı
                    </p>
                    <input
                        class="py-2 px-4 rounded-lg border-2 border-purple-300 mt-1 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        type="text" name="editUsername" id="editUsername" />
                </div>
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <p class="text-lg text-black font-semibold">
                        Parola
                    </p>
                    <input
                        class="py-2 px-4 rounded-lg border-2 border-purple-300 mt-1 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:border-transparent"
                        type="text" name="editPassword" id="editPassword" />
                </div>
                <input type="hidden" name="editId" id="editId">
                <div class="grid grid-cols-1 mt-5 mx-7">
                    <button
                        class="px-4 py-2 text-base text-purple-600 font-semibold rounded-full border border-purple-200 hover:text-white hover:bg-purple-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2"
                        id="editSave" type="submit">Kaydet</button>
                    <button
                        class="px-4 py-2 text-base text-red-600 font-semibold rounded-full border border-purple-200 hover:text-white hover:bg-red-600 hover:border-transparent focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-offset-2 mt-2"
                        id="editCancel" type="button">İptal</button>
                </div>
            </div>
        </form>
    </div>

    <div class="max-w-4xl ml-auto mr-auto pt-6" id="list">

    </div>

    <!-- modal -->
    <div class="main-modal fixed w-full inset-0 z-50 overflow-hidden flex justify-center items-center animated fadeIn hidden"
        style="background: rgba(0,0,0,.7);" id="modal">
        <div
            class="border border-blue-500 shadow-lg modal-container bg-white w-4/12 md:max-w-11/12 mx-auto rounded-xl shadow-lg z-50 overflow-y-auto">
            <div class="modal-content py-4 text-left px-6">
                <!--Title-->
                <div class="flex justify-between items-center pb-3">
                    <p class="text-2xl font-bold text-black-500">Tercihler</p>
                    <div class="modal-close cursor-pointer z-50" onclick="modalClose('main-modal')">
                        <svg class="fill-current text-gray-500" xmlns="http://www.w3.org/2000/svg" width="18"
                            height="18" viewBox="0 0 18 18">
                            <path
                                d="M14.53 4.53l-1.06-1.06L9 7.94 4.53 3.47 3.47 4.53 7.94 9l-4.47 4.47 1.06 1.06L9 10.06l4.47 4.47 1.06-1.06L10.06 9z">
                            </path>
                        </svg>
                    </div>
                </div>
                <!--Body-->
                <div class="my-5 mr-5 ml-5 flex justify-center">
                    <form id="preferencesForm" class="w-full" onkeydown="return event.key != 'Enter';">
                        <div>
                            <div>
                                <label for="defaultUsername" class="text-md text-gray-800">Default Kullanıcı Adı</label>
                            </div>
                            <div>
                                <input type="text" id="defaultUsername" autocomplete="off" name="defaultUsername"
                                    class="h-3 p-6 w-full border-2 border-gray-300 mb-5 rounded-md"
                                    placeholder="Kayıt eklerken kullanıcı adı girmeye gerek kalmaz.">
                            </div>
                        </div>
                        <div>
                            <div>
                                <label for="hidePasswords" class="text-md text-gray-800">Parolaları Gizle</label>
                                <input type="checkbox" id="hidePasswords" autocomplete="off" name="hidePasswords"
                                    class="form-checkbox mb-5">
                            </div>
                        </div>
                        <div>
                            <div>
                                <label for="hidePasswords" class="text-md text-gray-800">Sıralama Tercihi</label>
                                <select name="sortBy" id="sortBy" class="form-select mb-5">
                                    <option value="newer">Yeniden eskiye</option>
                                    <option value="older" selected>Eskiden yeniye</option>
                                </select>
                            </div>
                        </div>

                        <div>
                            <div>
                                <label class="text-md text-gray-800">Yedek</label>
                            </div>
                            <input id="getBackup"
                                class="bg-purple-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 hover:border-blue-500 rounded mt-2 text-lg cursor-pointer"
                                value="İndir" type="button">
                            </input>
                            <input id="uploadBackup"
                                class="bg-purple-600 hover:bg-indigo-500 text-white font-bold py-2 px-4 hover:border-blue-500 rounded mt-2 text-lg cursor-pointer"
                                value="Yükle" type="button"
                                onclick="event.preventDefault(), $('#uploadBackupDiv').toggle()">

                            </input>
                        </div>
                        <div class="mt-5 hidden" id="uploadBackupDiv">
                            <div>
                                <label for="uploadBackupInput" class="text-md text-gray-800">Yedek Yükle</label>
                            </div>
                            <div>
                                <input type="button" id="uploadBackupInput"
                                    onclick="document.getElementById('realUploadBackup').click()" autocomplete="off"
                                    name="uploadBackupInput"
                                    class="p-2 w-full border-2 bg-purple-600 text-white mb-5 rounded-md font-bold cursor-pointer"
                                    value="Dosya Seç">
                            </div>
                        </div>

                    </form>
                </div>
                <!--Footer-->
                <div class="flex justify-end pt-2">
                    <button
                        class="bg-blue-500 hover:bg-blue-400 text-white font-bold py-2 px-4 hover:border-blue-500 rounded text-lg ml-2"
                        onclick="savePreferences(document.getElementById('preferencesForm'))">Kaydet</button>
                    <button
                        class="bg-red-500 hover:bg-red-400 text-white font-bold py-2 px-4 hover:border-red-500 rounded text-lg ml-2"
                        onclick="modalClose('main-modal')">Kapat</button>
                </div>
            </div>
        </div>
    </div>

    <input type="file" onchange="uploadBackup()" class="invisible" id="realUploadBackup">

    <footer class="flex justify-center mt-10 mb-4">
        <p>made by <a class="text-blue-400" href="https://furkankalyoncu.net" target="_blank" rel="noopener">Furkan</a>
            •&nbsp;</p>
        <a class="text-blue-400" href="https://github.com/furkankalyoncu/parola-depom" target="_blank"
            rel="noopener">Github</a>
    </footer>
</body>
<script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
<script src="js/FileSaver.js"></script>
<script src="js/core.js"></script>
<script src="js/ui.js"></script>
<script>
    const url = new URL(document.location.href)
    console.log(url);
    url.protocol == 'http:' ? window.location.href = 'https://paroladepom.com' : '';
    listAll()
    handlePreferences()
</script>

</html>